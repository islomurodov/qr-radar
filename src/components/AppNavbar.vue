<script setup lang="ts">
import { Menu, MenuButton, MenuItem, MenuItems } from '@headlessui/vue'
import { useUserStore } from '~/stores/user'

const router = useRouter()

const userStore = useUserStore()
</script>

<template>
  <header>
    <div class="container">
      <div class="header-container">
        <div class="header-container-left">
          <RouterLink to="/" class="head-logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="83" height="72" viewBox="0 0 83 72" fill="none">
              <g clip-path="url(#clip0_102_12519)">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M53.6184 24.5013C52.2861 23.1459 49.3797 24.2601 51.463 26.5959C51.6496 26.7667 51.8453 26.9266 52.0492 27.0748H38.97L36.7738 25.0398L34.8993 27.0748H26.2031L34.2677 18.173C35.0335 18.5477 35.8225 18.9148 36.6353 19.2724C43.6667 22.3657 50.0175 23.6395 54.4343 23.4769C56.334 23.2483 55.6175 20.5044 53.8512 20.6812C43.8175 21.6857 27.7055 12.1284 22.5156 5.0023C21.8939 4.21593 22.2593 3.23035 23.2954 3.24917C24.7853 3.0982 26.4383 3.25922 27.9131 3.48619C31.105 3.96877 34.6835 4.98558 38.3198 6.39212C40.2409 7.17713 41.1375 4.53622 39.3089 3.75635C28.2804 -0.784175 20.6953 -1.19298 19.1521 2.44616C17.6935 5.88546 22.6262 11.8464 31.7224 16.8523L22.4613 27.0748H0V44.5366H8.60282L38.5347 72L63.8438 44.5366H83V27.0748H71.5533L71.2083 17.5551L59.4669 6.67504L40.2238 7.60399L37.5382 10.5202L36.9413 11.1685C35.7855 12.4235 37.9864 14.1271 38.9711 13.058L41.4891 10.3238L58.4404 9.50546L68.4826 18.811L68.7822 27.0748H59.7015C61.3953 25.8382 62.4647 23.8059 62.3814 21.5483C62.2484 17.9433 59.2268 15.1289 55.6326 15.2623C53.7385 15.3326 52.0633 16.2075 50.8939 17.5802C48.8598 20.0279 52.1509 21.2563 53.0042 19.744C53.6421 18.8666 54.6216 18.303 55.7432 18.2614C57.6861 18.1893 59.3194 19.7106 59.3913 21.6593C59.4631 23.6079 57.9464 25.2462 56.0035 25.3183C55.1057 25.3516 54.2739 25.0446 53.6184 24.5013ZM23.1833 35.425C23.1833 36.6362 22.9619 37.6575 22.519 38.4912C22.0761 39.325 21.4253 39.9466 20.5599 40.3561L23.2446 43.2372H20.1102L18.0932 40.8691H17.9433C16.2568 40.8691 14.9586 40.4005 14.0523 39.4632C13.1495 38.5257 12.6963 37.1764 12.6963 35.4127C12.6963 33.6637 13.1495 32.3218 14.0523 31.3894C14.9586 30.457 16.2636 29.9908 17.9637 29.9908C19.6469 29.9908 20.9381 30.4594 21.8375 31.3968C22.7337 32.3342 23.1833 33.6761 23.1833 35.425ZM15.4731 35.4225C15.4731 36.6263 15.681 37.5439 16.1 38.1754C16.519 38.8069 17.1323 39.1226 17.9466 39.1226C19.582 39.1226 20.3997 37.8893 20.3997 35.4225C20.3997 32.9558 19.5888 31.7224 17.9637 31.7224C17.1391 31.7224 16.519 32.0356 16.1 32.6647C15.681 33.2937 15.4731 34.2138 15.4731 35.4225ZM28.0284 36.6065V40.7211H25.3129V30.1535H28.8665C30.369 30.1535 31.4798 30.41 32.1953 30.9256C32.9108 31.4412 33.2685 32.2306 33.2685 33.2912C33.2685 34.6257 32.645 35.5582 31.4014 36.0885L34.2054 40.7211H31.3026L28.9959 36.6065H28.0284ZM28.0284 34.9192H28.7268C29.364 34.9192 29.8239 34.7885 30.1033 34.5246C30.3827 34.2631 30.5223 33.8709 30.5223 33.3504C30.5223 32.8127 30.3759 32.4279 30.0795 32.1984C29.7831 31.969 29.3265 31.8556 28.7063 31.8556H28.0284V34.9192ZM40.8289 40.7211L40.2974 39.621H40.2395C39.8476 40.0946 39.4389 40.4226 39.0197 40.6003C38.6006 40.7803 38.0725 40.8691 37.4321 40.8691C36.6144 40.8691 35.9704 40.6471 35.5002 40.2031C35.03 39.759 34.7949 39.1424 34.7949 38.353C34.7949 37.502 35.1152 36.8729 35.7592 36.461C36.403 36.049 37.3639 35.8196 38.6416 35.7777L40.1202 35.7333V35.156C40.1202 34.4062 39.6705 34.0313 38.771 34.0313C38.1066 34.0313 37.3401 34.2187 36.4747 34.5961L35.5547 33.2641C36.6586 32.7584 37.8613 32.5068 39.1594 32.5068C40.3382 32.5068 41.2344 32.751 41.8511 33.2394C42.4677 33.7279 42.7744 34.421 42.7744 35.3164V40.7211H40.8289ZM38.5188 39.3594C39.0061 39.3594 39.3945 39.2016 39.6841 38.8858C39.9738 38.5701 40.1202 38.1507 40.1202 37.6253V36.947L39.2992 36.9766C38.6927 36.9988 38.2497 37.1246 37.9669 37.3515C37.6808 37.5785 37.5411 37.9139 37.5411 38.3629C37.5411 39.0264 37.8682 39.3594 38.5188 39.3594ZM47.8407 40.8691C46.8151 40.8691 46.0077 40.504 45.4148 39.7714C44.8254 39.0388 44.5289 38.02 44.5289 36.7126C44.5289 35.4027 44.8186 34.3766 45.3979 33.6341C45.977 32.8916 46.7743 32.5216 47.793 32.5216C48.2973 32.5216 48.7334 32.6129 49.1048 32.793C49.4728 32.973 49.8135 33.2789 50.1269 33.7057H50.2871C50.2087 32.973 50.1678 32.46 50.1678 32.1664V29.4727H52.822V40.7211H50.8458L50.3961 39.6777H50.3075C49.7419 40.472 48.9208 40.8691 47.8407 40.8691ZM48.6993 39.241C49.1933 39.241 49.5511 39.0782 49.7794 38.7526C50.0042 38.427 50.1269 37.835 50.1474 36.9766V36.7249C50.1474 35.79 50.0316 35.1314 49.8032 34.7516C49.5716 34.3692 49.1967 34.1793 48.6686 34.1793C48.178 34.1793 47.8203 34.3964 47.5989 34.8329C47.3739 35.2696 47.2614 35.906 47.2614 36.7398C47.2614 37.5735 47.3773 38.1976 47.6022 38.6145C47.827 39.0314 48.1951 39.241 48.6993 39.241ZM60.5152 40.7211L59.9836 39.621H59.9257C59.5339 40.0946 59.125 40.4226 58.7059 40.6003C58.2869 40.7803 57.7588 40.8691 57.1183 40.8691C56.3006 40.8691 55.6567 40.6471 55.1864 40.2031C54.7163 39.759 54.4812 39.1424 54.4812 38.353C54.4812 37.502 54.8014 36.8729 55.4454 36.461C56.0892 36.049 57.0501 35.8196 58.3277 35.7777L59.8064 35.7333V35.156C59.8064 34.4062 59.3568 34.0313 58.4573 34.0313C57.7928 34.0313 57.0263 34.2187 56.1609 34.5961L55.2409 33.2641C56.3448 32.7584 57.5475 32.5068 58.8457 32.5068C60.0245 32.5068 60.9206 32.751 61.5372 33.2394C62.1539 33.7279 62.4607 34.421 62.4607 35.3164V40.7211H60.5152ZM58.2051 39.3594C58.6923 39.3594 59.0808 39.2016 59.3703 38.8858C59.66 38.5701 59.8064 38.1507 59.8064 37.6253V36.947L58.9854 36.9766C58.3789 36.9988 57.936 37.1246 57.6532 37.3515C57.367 37.5785 57.2273 37.9139 57.2273 38.3629C57.2273 39.0264 57.5544 39.3594 58.2051 39.3594ZM69.3464 32.5216C69.6734 32.5216 69.9937 32.5586 70.3037 32.6301L69.9971 34.495C69.8098 34.4456 69.5677 34.4234 69.268 34.4234C68.6207 34.4234 68.1232 34.606 67.779 34.9761C67.4316 35.3436 67.2578 35.8789 67.2578 36.5819V40.7211H64.6036V32.6696H66.791L67.0908 33.9301H67.1794C67.4725 33.4245 67.7927 33.0643 68.1368 32.8472C68.4844 32.6301 68.8864 32.5216 69.3464 32.5216ZM60.0726 44.5365H52.6604L48.8534 48.6695L44.3933 44.5365H41.1908L47.3625 50.2556L45.5014 52.2761L38.8501 46.1126L40.3018 44.5365H37.4511L33.3342 49.0059L31.2059 47.0336L33.506 44.5365H31.0731L26.181 49.8475L20.4496 44.5365H12.7057L38.371 68.0853L60.0726 44.5365ZM48.6882 44.5365H48.4806L48.5926 44.6404L48.6882 44.5365ZM27.1008 44.5365H24.5369L25.9201 45.8183L27.1008 44.5365ZM30.5055 47.7939L32.6339 49.7662L29.6045 53.0551L27.476 51.0828L30.5055 47.7939ZM37.3782 47.7871L43.9915 53.9153L37.8112 60.6248L31.1979 54.4965L37.3782 47.7871ZM37.3371 51.6583L39.9057 54.0386L37.5504 56.5955L34.9817 54.2153L37.3371 51.6583Z" fill="#1B1918" />
              </g>
              <defs>
                <clipPath id="clip0_102_12519">
                  <rect width="83" height="72" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </RouterLink>
          <ul class="head-menu">
            <li>
              <RouterLink to="/">
                Главная
              </RouterLink>
            </li>
            <li>
              <RouterLink to="/">
                О товаре
              </RouterLink>
            </li>
            <li>
              <RouterLink to="/">
                Купить товар
              </RouterLink>
            </li>
            <li>
              <RouterLink to="/">
                Юридическая информация
              </RouterLink>
            </li>
          </ul>
        </div>
        <div class="header-container-right">
          <div>
            <RouterLink v-if="!userStore.isAuthenticated" to="/vhod">
              <button class="btn-sign-in" type="button">
                Войти
              </button>
            </RouterLink>
            <Menu v-else>
              <MenuButton style="border-radius: 9999px; height: 50px; aspect-ratio: 1/1; padding: 0;">
                <img style="object-fit: cover; height: 50px;" src="/img/image.png" alt="user">
              </MenuButton>
              <div style="position: relative;">
                <MenuItems style="position: absolute; left: -100px; padding: 10px 5px; border-radius: 5px; background-color: white; box-shadow: 1px 1px 3px 1px gray;">
                  <MenuItem as="div">
                    <RouterLink to="/admin" style="white-space: nowrap;">
                      <button style="padding: 8px 10px; font-size: large;">
                        Мои QR-коды
                      </button>
                    </RouterLink>
                  </MenuItem>
                  <MenuItem as="div" style="margin-top: 5px;">
                    <div>
                      <button style="background-color: red; font-size: large; padding: 8px 10px; color: white; width: 100%; border-radius: 5px;" @click="() => { userStore.logout(); router.push('/') }">
                        Выход
                      </button>
                    </div>
                  </MenuItem>
                </MenuItems>
              </div>
            </Menu>
          </div>
          <div class="hamburger-menu">
            <input id="menu__toggle" type="checkbox">
            <label class="menu__btn" for="menu__toggle">
              <span class="span-burger" />
            </label>
            <ul class="menu__box">
              <li class="content-burger">
                <ul class="list-header">
                  <li>
                    <RouterLink to="/">
                      Главная
                    </RouterLink>
                  </li>
                  <li>
                    <RouterLink to="/">
                      О товаре
                    </RouterLink>
                  </li>
                  <li>
                    <RouterLink to="/">
                      Купить товар
                    </RouterLink>
                  </li>
                  <li>
                    <RouterLink to="/">
                      Юридическая информация
                    </RouterLink>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </header>
</template>
